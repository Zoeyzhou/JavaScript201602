<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>JSON</title>
</head>
<body>
<script charset="utf-8" type="text/javascript" src="js/utils.js"></script>
<script type="text/javascript">
    //1、JSON:是一种数据格式,把属性名用“双引号(不能是单引号)”包起来的就是JSON格式的

    //    var obj = {name: "珠峰", age: 7};//->普通的格式的对象
    //    var jsonObj = {"name": "珠峰", "age": 7};//->JSON格式的对象
    //
    //    var str = '{name: "珠峰", age: 7}';//->普通格式的字符串
    //    var jsonStr = '{"name": "珠峰", "age": 7}';//->JSON格式的字符串

    //2、浏览器window这个对象中提供了一个叫做JSON的属性名,这个属性有两个属性值：parse、stringify用来解析JSON格式数据的
    //->JSON.parse():把JSON格式的字符串转换为JSON格式的对象
    //->JSON.stringify():把JSON的对象转换为JSON格式的字符串

    //->在IE6~7浏览器中,window下并没有JSON这个属性,那么我们的parse/stringify都不能使用

    var str = '{"code":0,"data":{"today":"2016-03-31","data":[{"date":"2015-10-08","number":"6","weekday":"\u661f\u671f\u56db"},{"date":"2015-10-09","number":"9","weekday":"\u661f\u671f\u4e94"}]},"version":"29a44ff5b283fc94d5eb546bd4424d1a"}';
    //var jsonData = JSON.parse(str);
    //console.log(eval("(" + str + ")"));//->使用eval的话,需要在JSON字符串的左右两边各加小括号(不要问我为什么,记下来即可)

    var jsonData = utils.formatJSON(str);
    console.dir(jsonData);


    //    console.log(jsonData);
    //    jsonData.data.today
    //    jsonData.data.data[0].number

    //    console.log(JSON.stringify(jsonData));

    //实现数据绑定：->字符串拼接是我们项目中最常用的一种方式，目前听到的模板引擎绑定数据的核心原理就是字符串拼接

    //字符串拼接是通过innerHTML+=来操作的，首先会把页面中原有的标签当做字符串获取到，和最新的字符串进行拼接，最后再重新的放回到页面，浏览器进行重新的渲染，这样的过程导致了原有标签绑定的事件都消失了
    //优势：把字符都拼接完成后再统一添加到页面，只引发一次回流

    //动态创建DOM元素的方式
    //优势：每次都是创建一个新的元素，然后增加到容器的末尾，对之前的标签没有产生任何的影响

    //DOM性能优化的深入机制
    //回流

</script>
</body>
</html>